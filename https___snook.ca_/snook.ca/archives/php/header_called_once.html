<!doctype html>
<html lang="en">

<!-- Mirrored from snook.ca/archives/php/header_called_once by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 25 Apr 2021 22:04:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<title>PHP header can only be called once - Snook.ca</title>
	<meta name="viewport" content="width=device-width" />
		<link rev="canonical" type="text/html" href="https://snook.ca/archives/php/header_called_once">
	<meta property="og:url" content="https://snook.ca/archives/php/header_called_once">
	<meta property="og:title" content="PHP header can only be called once">
	<meta property="og:description" name="description" content="  I hate spending too much time just trying to solve one little problem. This was seriously one of those times.
  To give some background on what I was trying to do, I needed to have a user log into ...">
	<meta property="og:type" content="article">
				<meta property="og:image" content="https://snk.ms/logo.gif">
		<meta name="twitter:card" content="summary">
				<meta name="theme-color" content="#680">
	<link rel="alternate" type="application/rss+xml" title="XML" href="https://snook.ca/jonathan/index.rdf"> 
<!--	<link rel="stylesheet" href="/css/snook-v10.css"> -->
<style>
/* A font by Jos Buivenga (exljbris) -> http://www.exljbris.nl */

@font-face { font-family: 'MuseoCustom'; src: url('https://snook.ca/css/MuseoSans_500-webfont.woff2') format('woff2'), url('https://snook.ca/css/MuseoSans_500-webfont.woff') format('woff'); font-weight: normal; font-style: normal; }
@font-face { font-family: 'Playfair Display'; font-style: normal; font-weight: 900; src: local('Playfair Display Black'), local('PlayfairDisplay-Black'), url('https://snook.ca/css/playfair.woff2') format('woff2'), url(https://fonts.gstatic.com/s/playfairdisplay/v10/UC3ZEjagJi85gF9qFaBgIFG5nCscAKpKP81nraB-v6E.woff) format('woff'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215; }
html{background:#EEEEE6 url(https://snook.ca/img/bg.png)}body{margin:0;padding:0;border:12px solid #680;font-family:'PT Serif',Georgia,Times,'Times New Roman',serif;background:url(https://snook.ca/img/swash.svg) no-repeat 50% 0;background-size:1600px 200px;color:#333;line-height:1.7;min-height:calc(100vh - 24px)}img{border:0}figcaption{font-style:italic;font-size:90%;}p{margin-bottom:1.5em}hr{width:20%;}a{color:#680;transition:all .2s}a:hover{text-decoration:none}a:active,a:focus{background-color:rgba(51,51,51,.1)}blockquote{font-style:italic;font-size:95%;background:url(https://snook.ca/img/comment.svg) no-repeat 2px 5px;margin:0;padding-left:20px}pre{margin-left:-20px;background:url(https://snook.ca/img/code-bookmark.svg) no-repeat 0 0}pre code{display:block;margin-left:20px;padding:10px;font-size:90%;background-color:rgba(255,255,255,.5);overflow:auto}table{border:1px solid #666;border-width:1px 0;border-collapse:collapse;background-color:rgba(255,255,255,.5);margin-bottom:30px;font-size:90%}th{border:1px solid #666;border-width:1px 0;background-color:rgba(51,51,51,.1)}td{border:1px solid #CCC;border-width:1px 0;padding:2px 10px}.update{background-color:rgba(33,129,66,0.1);padding:5px 10px 1px;border-radius:5px}#header{font-family:'MuseoCustom','Century Gothic',Arial,Helvetica,sans-serif;font-size:13px;max-width:780px;margin:auto;line-height:12px;background:url(https://snook.ca/img/snook-bookmark.svg) no-repeat;padding:0 20px}#header h1,#header h2{font-size:13px;font-weight:400;margin:0}#header h1{color:#680;padding-top:18px;text-transform:uppercase}#header h2 a{text-decoration:none;color:#333;display:block}#header h2 a:hover{color:#680}#header .nav{text-transform:uppercase;word-spacing:4px;padding-top:20px}#header .nav a{text-decoration:none;color:#333;padding-top:3px}#header .nav a:hover{color:#680}.blurb{line-height:1.3}#content{max-width:820px;margin:4em auto;background:url(https://snook.ca/img/star.svg) no-repeat 3px 58px}#main{padding:40px 0 0;background:url(https://snook.ca/img/line-v.png) no-repeat 100% 90%}#main .dt,#main .cat,#main .shorturl{font-family:Garamond,Georgia,Times,'Times New Roman',serif;text-transform:uppercase;font-size:13px;font-weight:700;color:#666;background:url(https://snook.ca/img/line.png) no-repeat -200px 70%}#main h2{font-weight:900;font-size:28px;margin:7px 0 0;font-family:'Playfair Display',Garamond,serif;line-height:1.1;background:url(https://snook.ca/img/line.png) no-repeat 100px 26px}#main h2 a{text-decoration:none;color:#444}#main h2 a:hover{color:#680}.article-image-small{margin-top:20px;text-align:center;background-color:#000;padding:6px;font-size:0;display:inline-block;}.article-image{text-align:center;background-color:rgba(0,0,0,.07);padding:14px 12px;font-size:0px;width:calc(100vw - 24px);position:relative;left:50%;right:50%;margin:20px -50vw 4rem -50vw;}#main .article.inside h1{font-weight:900;font-size:2em;margin:0 0 2em;font-family:'Playfair Display',Garamond,serif;line-height:40px;background:url(https://snook.ca/img/line.png) no-repeat 100px 90%}#main .article.inside h2{font-family:'Playfair Display',Georgia,Times,'Times New Roman',serif;font-weight:900;font-size:1.5em;text-transform:none;background:none}@media only screen and (min-width: 480px){#main .article.inside{font-size:120%}}#main .article{margin-bottom:40px;padding:0 20px;background:url(https://snook.ca/img/star.svg) no-repeat 2px 13px}#main .article:first-child{background:none}#main .article img{max-width:100%;max-height:80vh;}#main .article .abstract{font-size:110%;}#main .fullarticle{text-align:right;background:url(https://snook.ca/img/line.png) no-repeat 190% 70%}#main .fullarticle a{text-transform:uppercase;text-decoration:none;color:#680;font-size:14px;padding:4px}#main .fullarticle a:hover{background-color:rgba(51,51,51,.1)}#main .meta{background:url(https://snook.ca/img/star.svg) no-repeat 3px .3em;font-family:Garamond,Georgia,Times,'T\Aimes New Roman',serif;padding-left:20px;margin-top:40px}#main .shorturl .url{text-transform:none;color:#555}#comments .meta{background:url(https://snook.ca/img/comment-bookmark.svg) no-repeat 0 3px}#comments .comment{background:url(https://snook.ca/img/comment.svg) no-repeat 3px .6em}#comments .comment .meta .authorname{text-transform:uppercase}#comments .comment .meta .commentnumber a{float:right;color:rgba(51,51,51,.25);font-size:24px;text-decoration:none}#comments .comment .quote{padding-left:20px;font-size:95%;word-break:break-word}#comments .commentcount{text-transform:uppercase}#comments .comment .meta{background:url(https://snook.ca/img/line.png) no-repeat 40px 1.1em}#comments .snook{background:url(https://snook.ca/img/comment-snook.png) no-repeat 0 3px}#comments .snook .meta .commentnumber a{color:rgba(102,136,0,.5)}#comments .snook .meta .commentnumber a:hover{color:rgba(102,136,0,1)}h3#postcomments{text-transform:uppercase;font-weight:400;font-size:14px;background:url(https://snook.ca/img/line.png) no-repeat 40px 14px;margin:0 20px}#comments_form{background:url(https://snook.ca/img/line-v.png) no-repeat 10px 0;padding-left:20px}#comments_form .inputgroup{background:url(https://snook.ca/img/line.png) no-repeat 100% 100%;margin-bottom:5px}#postmeta{margin-bottom:10px}#postdata{background:url(https://snook.ca/img/line-v.png) no-repeat 100% 50%}#postdata textarea{width:100%;border:none;font-size:inherit;font-family:inherit;padding:10px;box-sizing:border-box}#postmeta label{width:80px;display:block;float:left;text-transform:uppercase;font-size:10px}#postmeta input{border:none;max-width:407px}#comments_form .formnote{font-size:80%}#commentsclosed{padding:10px;margin:20px 0;background:rgba(51,51,51,.1)}#livepreview{display:none}#main .article ul.projects{list-style:none;margin:0;padding:0;overflow:hidden}ul.projects li{margin:0 10px 20px 0;padding:0;float:left;width:240px;line-height:15px;list-style:none}ul.projects li img{float:left;margin-right:5px;border:5px solid #CCC}ul.projects li a:hover img{border-color:#BBCF7F}ul.projects li span{display:block;font-size:12px}#footer{clear:both;font-size:90%;margin-bottom:-12px;}#footer .shell{max-width:770px;margin:auto;}#footer #copyright p{font-family:MuseoCustom,Helvetica,sans-serif}#footer #copyright .shell{padding:0 25px 200px;background:url(https://snook.ca/img/PolySnook.svgo.svg) no-repeat 50% 120%;background-size:400px 250px}iframe{max-width:100%;}
</style>
	<link rel="stylesheet" href="https://snook.ca/css/snook-v10-print.css" media="print">	
</head>
<body>
	<div id="header">
		<h1>Snook.ca</h1>
		<h2><a href="https://snook.ca/">LIFE &amp; TIMES of a WEB DEVELOPER</a></h2>
		<div class="nav"><a href="https://snook.ca/about/">About</a> &middot;  <a href="https://snook.ca/contact/">Contact</a> &middot; <a href="https://snook.ca/archives/">Archives</a></div>

	</div>
	<div id="content">
	<div id="main">
		<div class="article inside">
	
	<h1>PHP header can only be called once</h1>
		  <p>I hate spending too much time just trying to solve one little problem. This was seriously one of those times.</p>
  <p>To give some background on what I was trying to do, I needed to have a user log into one system and have it automatically authenticate against another site on the same server. Your usual &quot;single sign-on&quot; functionality. The problem was, I didn't want to duplicate a lot of code to encode session data as this app was doing. Instead, I made a request to the login form from the server, passing in the credentials and grabbing the response. Then, I'd pass the Set-Cookie headers back to the client. Voila! Okay, not quite.</p>
  <p>First, it turns out that you can't use <code>header</code> more than once for the same header. It's even <a href="http://php.net/header">documented</a>. Fine, I missed that. Then I needed to break down each of the Set-Cookie headers and recreate them as PHP <code>setcookie</code> calls. Lastly, it didn't like that I wasn't setting a path. That meant I was getting the Set-Cookie in the response but it wasn't sticking. That had me banging my head, for sure. </p>
  <p>Sometimes you can get spoiled using a framework that handles all of this for you. I was tracing HTTP calls, writing out variables, and checking the database trying to figure out why I had different information in all three places. </p>
  <p>Thankfully, it all worked out in the end and now I can move to the next problem.</p>	
</div>
<div class="meta">
	<div class="dt">Published April 11, 2008 </div>
	<div class="cat">Categorized as <a href="https://snook.ca/archives/php/">PHP</a></div>
	<div class="shorturl">Short URL: <span class="url">https://snook.ca/s/886</span></div>
</div>

<div id="comments">
	<div class="meta">
		<h2>Conversation</h2>
		<div class="commentcount">10 Comments &middot; <a href="https://snook.ca/archives/php/header_called_once.rss">RSS feed</a></div>
		<div class="commentfeed"></div>
	</div>
	
		<div class="comment" id="c57821">
		<div class="meta">
			<div class="commentnumber"><a href="#c57821">1</a></div>
			<span class="authorname">Matt Knowlton</span> said on April 11, 2008		</div>
		<div class="quote"><p>Yeah, I have that problem all of the time.<br />
But, I tend to go the setcookie() route most of the time.</p>
<p>I don't use the frameworks, I feel like I'm cheating on a test.<br />
I guess you use whatever you're used to.
</p>
</div>
	</div>
		<div class="comment" id="c57824">
		<div class="meta">
			<div class="commentnumber"><a href="#c57824">2</a></div>
			<span class="authorname"><a href="http://www.pixeldepo.com/">Radoslav Stankov</a></span> said on April 11, 2008		</div>
		<div class="quote"><p>I remember back in the days when I started coding for the first time. Was so strange to why I can't do echo before header. The documentation helped a lot (as always).
</p>
</div>
	</div>
		<div class="comment" id="c57825">
		<div class="meta">
			<div class="commentnumber"><a href="#c57825">3</a></div>
			<span class="authorname">Nate Klaiber</span> said on April 11, 2008		</div>
		<div class="quote"><p>Glad you got it all squared away.</p>
<p>@Matt Knowlton<br />
It's only cheating if you don't know the answers at the core. If you know PHP, then you can figure out the core of the Framework and it will only streamline your building process. Cheating would be using said framework without understanding what goes on under the hood.
</p>
</div>
	</div>
		<div class="comment" id="c57826">
		<div class="meta">
			<div class="commentnumber"><a href="#c57826">4</a></div>
			<span class="authorname"><a href="http://exaltic.com/">Lewis</a></span> said on April 11, 2008		</div>
		<div class="quote"><p>"First, it turns out that you can't use header more than once for the same header"</p>
<p>...Yes you can:</p>
<p>"The optional replace  parameter indicates whether the header should replace a previous similar header, or add a second header of the same type. By default it will replace, but if you pass in FALSE as the second argument you can force multiple headers of the same type. For example:"</p>
<p>Plus why are you sending the raw headers for cookies anyway? It's just re-inventing the wheel.
</p>
</div>
	</div>
		<div class="comment snook" id="c57827">
		<div class="meta">
			<div class="commentnumber"><a href="#c57827">5</a></div>
			<span class="authorname">Jonathan Snook</span> said on April 11, 2008		</div>
		<div class="quote"><p>@Lewis: wow, I <strong>must</strong> be tired. I completely missed that. </p>
<p>Anyways, I wanted to send the raw header because, as I said in the post, I just wanted to passthrough the cookie calls from the other page. Using setcookie meant I had to break the cookies into name/value pairs. Had I looked closer, I could have avoided the whole mess. </p>
<p>Time for me to go to bed...
</p>
</div>
	</div>
		<div class="comment" id="c57828">
		<div class="meta">
			<div class="commentnumber"><a href="#c57828">6</a></div>
			<span class="authorname"><a href="http://exaltic.com/">Lewis</a></span> said on April 11, 2008		</div>
		<div class="quote"><p>Ah so you just wanted to pass on the cookie headers you received? Sorry I missed that.</p>
<p>Nothing worse than spending ages on 1 tiny, annoying problem. I find it one of the most annoying things in developing because there's nothing you can do to get back those wasted hours and you end up with nothing to show for it. What's worse is when you find out how simple the fix was :P
</p>
</div>
	</div>
		<div class="comment" id="c57850">
		<div class="meta">
			<div class="commentnumber"><a href="#c57850">7</a></div>
			<span class="authorname"><a href="http://jasonleveille.com/">leveille</a></span> said on April 12, 2008		</div>
		<div class="quote"><p>I've tried to get better over the years about not getting so stressed out when this crap happens to me.  I get so frustrated when something seems so simple and yet I'm getting stuck.  I left work on Friday in the middle of one of these monster simple issues, and surprise, it's client side and involves IE.
</p>
</div>
	</div>
		<div class="comment" id="c57853">
		<div class="meta">
			<div class="commentnumber"><a href="#c57853">8</a></div>
			<span class="authorname">Mohammad Elkersh</span> said on April 12, 2008		</div>
		<div class="quote"><p>Put this as first thing on your file "Nothing before it even a white space"<br />
<code><br />
ob_start();<br />
</code><br />
Put this as Last thing in page "Not thing after this at all "<br />
<code><br />
ob_end_flush();<br />
</code><br />
Of course between php open and close tags<br />
This will solve the problem<br />
in my application i always use one index file and put this in that file you can do this or but them in header and footer</p>
<p>what that exactly do is turn on some sort of buffer and will not send the header until all the page processed </p>
<p>I wish that help</p>
<p>Regards,
</p>
</div>
	</div>
		<div class="comment" id="c57864">
		<div class="meta">
			<div class="commentnumber"><a href="#c57864">9</a></div>
			<span class="authorname">Andrew</span> said on April 13, 2008		</div>
		<div class="quote"><p>It's like the missing semicolons - there's always one floating somewhere...</p>
<p>Or the cast conversions (in C++ for me), but yeah, there's always some small piece of code or documentation that you're missing - I tried to develop without the internet recently and found it hard because I'm used to being able to read documentation online.
</p>
</div>
	</div>
		<div class="comment" id="c59374">
		<div class="meta">
			<div class="commentnumber"><a href="#c59374">10</a></div>
			<span class="authorname">Sean Sullivan</span> said on September 08, 2008		</div>
		<div class="quote"><p>@Jonathon,</p>
<p>I too, completely missed that second parameter on header()...  When in the heat of battle it can be a little hard to take a deep breath and read the manual =)
</p>
</div>
	</div>
		


		<div id="commentsclosed">Sorry, comments are closed for this post. If you have any further questions or
	comments, feel free to <a href="https://snook.ca/contact/">send them to me directly</a>.</div>
	</div>
	</div>
	</div>
	<div id="footer">
		<div id="copyright"><div class="shell">
<p class="blurb"> Hi. My name is Jonathan Snook and this is my site. I write about what interests me, which is usually web design, development, and technology. I'm also in the middle of a <a href="https://fifty.snook.ca/">food adventure</a> and I like <a href="https://nook.snook.ca/">whisky</a>.
    <span>I wrote <a href="http://smacss.com/">SMACSS</a>.  I <a href="http://twitter.com/snookca">tweet</a>. Want to <a href="https://snook.ca/about/">learn more</a>? </span>
</p>
			<p>&copy; Jonathan Snook</p>
		</div></div>
	</div>
</body>

<!-- Mirrored from snook.ca/archives/php/header_called_once by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 25 Apr 2021 22:04:56 GMT -->
</html>
